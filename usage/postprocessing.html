<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Postprocessing the LDOS &mdash; Materials Learning Algorithms (MALA)  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/mala_favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tuning the hyperparameters" href="hyperparameters.html" />
    <link rel="prev" title="Training a model" href="trainingmodel.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/mala_horizontal_white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usage.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basicconcepts.html">Basic concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="preprocessing.html">Data generation and preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="trainingmodel.html">Training a model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Postprocessing the LDOS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#cached-access-recommended">Cached access (recommended)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#direct-access">Direct access</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hyperparameters.html">Tuning the hyperparameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="predictions.html">Predict electronic structures</a></li>
<li class="toctree-l2"><a class="reference internal" href="production.html">MALA production runs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTE.html">Contributing to MALA</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Materials Learning Algorithms (MALA)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../usage.html">Usage</a> &raquo;</li>
      <li>Postprocessing the LDOS</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//mala-project/mala/blob/develop/docs/source/usage/postprocessing.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="postprocessing-the-ldos">
<h1>Postprocessing the LDOS<a class="headerlink" href="#postprocessing-the-ldos" title="Permalink to this headline"></a></h1>
<p>MALA provides routines to calculate quantities of interests from the physical
data such as the LDOS, DOS and electronic density. The latter are not directly
predicted by MALA. In practice, they are either obtained via the LDOS, or
come directly from a DFT calculation. MALA implements two ways of accessing
observables and derived quantities from ab-initio data.</p>
<div class="section" id="cached-access-recommended">
<h2>Cached access (recommended)<a class="headerlink" href="#cached-access-recommended" title="Permalink to this headline"></a></h2>
<p>Mala <cite>Target</cite> objects provide several properties corresponding to physical
quantities. If a Target object is set up to contain electronic structure data,
then accessing properties will calculate them if needed, and provide cached
values if not. This method of access is preferred as it ensures consistency
and efficiency.
For example, one can do:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mala</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="n">mala</span><span class="o">.</span><span class="n">Parameters</span><span class="p">()</span>
<span class="n">parameters</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">descriptor_type</span> <span class="o">=</span> <span class="s1">&#39;LDOS&#39;</span>

<span class="c1"># Creates a LDOS object directly.</span>
<span class="c1"># This object will contain LDOS data.</span>
<span class="n">ldos</span> <span class="o">=</span> <span class="n">mala</span><span class="o">.</span><span class="n">LDOS</span><span class="o">.</span><span class="n">from_cube_file</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">path_to_cube_fiöle</span><span class="p">)</span>

<span class="c1"># The first command will calculate the Fermi energy because it</span>
<span class="c1"># has not been calculated yet. In the second command, the band</span>
<span class="c1"># energy will be calculated, and the cached Fermi energy will</span>
<span class="c1"># be used for that.</span>
<span class="n">fermi_energy</span> <span class="o">=</span> <span class="n">ldos</span><span class="o">.</span><span class="n">fermi_energy</span>
<span class="n">band_energy</span> <span class="o">=</span> <span class="n">ldos</span><span class="o">.</span><span class="n">band_energy</span>

<span class="c1"># Uncaching the properties makes it possible to have them be</span>
<span class="c1"># calculated anew (because e.g. temperatures have changed)</span>
<span class="n">ldos</span><span class="o">.</span><span class="n">uncache_properties</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>A wider range of properties is available, see e.g. <code class="docutils literal notranslate"><span class="pre">ex03_postprocess_data</span></code>.
For a full list, consult the API reference.</p>
</div>
<div class="section" id="direct-access">
<h2>Direct access<a class="headerlink" href="#direct-access" title="Permalink to this headline"></a></h2>
<p>For direct access to properties several <cite>get_some_property()</cite> functions exist.
They offer a more fine-granular access to several calculation parameters,
but put efficiency and consistency in the users hands. Usage is similar to
the cached access:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mala</span>

<span class="n">parameters</span> <span class="o">=</span> <span class="n">mala</span><span class="o">.</span><span class="n">Parameters</span><span class="p">()</span>
<span class="n">parameters</span><span class="o">.</span><span class="n">targets</span><span class="o">.</span><span class="n">descriptor_type</span> <span class="o">=</span> <span class="s1">&#39;LDOS&#39;</span>

<span class="c1"># Creates a LDOS object directly, without data.</span>
<span class="n">ldos</span> <span class="o">=</span> <span class="n">mala</span><span class="o">.</span><span class="n">LDOS</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>

<span class="c1"># To perform calculations, one now has to read in data first.</span>
<span class="n">ldos</span><span class="o">.</span><span class="n">read_from_cube</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="c1"># Use the LDOS object to calculate the band energy from LDOS data.</span>
<span class="c1"># Several keyword arguments are possible here.</span>
<span class="n">band_energy</span> <span class="o">=</span> <span class="n">ldos</span><span class="o">.</span><span class="n">get_band_energy</span><span class="p">(</span><span class="n">ldos</span><span class="o">.</span><span class="n">ldos</span><span class="p">,</span> <span class="o">....</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="trainingmodel.html" class="btn btn-neutral float-left" title="Training a model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="hyperparameters.html" class="btn btn-neutral float-right" title="Tuning the hyperparameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS). Under the terms of Contract DE-NA0003525 with NTESS, the U.S. Government retains certain rights in this software. Attila Cangi, J. Austin Ellis, Lenz Fiedler, Daniel Kotik, Normand Modine, Sivasankaran Rajamanickam, Steve Schmerler, Aidan Thompson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>